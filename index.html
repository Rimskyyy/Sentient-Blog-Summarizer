function showQuiz(index) {
  const blog = blogs[index];
  const quizDiv = document.getElementById("quizContainer");
  quizDiv.innerHTML = `<div class="quiz"><h3>Quiz</h3></div>`;
  const quizBox = quizDiv.querySelector(".quiz");

  // Track score
  let score = 0;

  blog.quiz.forEach((q, i) => {
    let qDiv = document.createElement("div");
    qDiv.innerHTML = `<h4>${i+1}. ${q.q}</h4>`;
    q.options.forEach((opt, idx) => {
      let optDiv = document.createElement("div");
      optDiv.className = "option";
      optDiv.innerText = opt;
      optDiv.onclick = () => {
        // Only allow one click per question
        if (qDiv.dataset.answered) return;
        qDiv.dataset.answered = "true";

        if (idx === q.answer) {
          optDiv.classList.add("correct");
          score += 1;
        } else {
          optDiv.classList.add("wrong");
          // Also mark the correct option
          const correctOpt = qDiv.querySelectorAll(".option")[q.answer];
          if (correctOpt) correctOpt.classList.add("correct");
        }
        // After last question, show score
        if (i === blog.quiz.length - 1) {
          setTimeout(() => {
            showScore(score, blog.quiz.length);
          }, 500);
        }
      };
      qDiv.appendChild(optDiv);
    });
    quizBox.appendChild(qDiv);
  });
}

function showScore(correct, total) {
  const quizContainer = document.getElementById("quizContainer");
  const scoreDiv = document.createElement("div");
  scoreDiv.style.marginTop = "20px";
  scoreDiv.style.padding = "15px";
  scoreDiv.style.background = "rgba(255,255,255,0.2)";
  scoreDiv.style.borderRadius = "8px";
  scoreDiv.innerHTML = `<h3>Your Score: ${correct} / ${total}</h3>`;
  quizContainer.appendChild(scoreDiv);
}
